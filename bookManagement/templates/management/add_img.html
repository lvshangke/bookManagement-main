<!--
添加图片：
    设计：
        pass
    细明：
        添加了enctype，使后端接收到前端上传到的文件
-->
{% extends 'management/base.html' %}
{% block title %}添加图书图片{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-md-offset-3 col-sm-10 col-sm-offset-1">
                {% if state == 'success' %}
                <div class="well">
                    <h2 class="text-success text-center">添加成功</h2>
                </div>
                {% elif state == 'error' %}
                <div class="well">
                    <h2 class="text-danger text-center">添加失败</h2>
                </div>
                {% endif %}
                <form method="post" role="form" class="form-horizontal" enctype="multipart/form-data">
                    {% csrf_token %}
                    <h1 class="form-signin-heading text-center">添加图片</h1>
                    <div class="form-group">
                        <label for="id_name" class="col-md-3 custom-control-label">名称：</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control"
                                   id="id_name" required name="name" autofocus>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="id_discription" class="col-md-3 custom-control-label">描述：</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control"
                            required name="description" id="id_discription">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="id_book" class="col-md-3 custom-control-label">所属书籍：</label>
                        <div class="col-md-9">
                            <select name="book" id="id_book" class="form-control">
                                {% for book in book_list %}
                                <option value="{{ book.id }}">{{ book.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="di_img" class="col-md-3 custom-control-label">图片：</label>
                        <div class="col-md-9">
                            <input type="file" id="id_img" name="img"
                                   class="form-control" accept=".png, .jpg" required>


{#                            <input type="text" class="newtext" value="选择文件"/>#}
{#                            <button class="change_btn">选择文件</button>#}
{#                            <script type="text/javascript">#}
{#                                $(".change_btn").click(function () { $(".filess").click(); });#}
{#                                     $('.filess').change(function(){#}
{#                                     var file=$('.filess').val();#}
{#                                     $('.newtext').val(file);#}
{#                                 })#}
{#                            </script>#}


                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-4 col-md-offset-4">
                            <button class="btn btn btn-primary btn-block" type="submit">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}